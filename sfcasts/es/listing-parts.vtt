WEBVTT

00:00:01.076 --> 00:00:05.086 align:middle
Nueva misión: necesitamos una página
que enumere todas las piezas disponibles.

00:00:05.656 --> 00:00:08.866 align:middle
Nuestro equipo de ventas ferengi la utilizará
para hacer un poco de upselling clásico.

00:00:09.416 --> 00:00:11.886 align:middle
Ya sabes, lo de siempre: Oye,
acabas de comprar una nave estelar,

00:00:12.226 --> 00:00:16.966 align:middle
¿qué tal unos nuevos y relucientes organizadores de
cristales de dilitio o estabilizadores de portavasos?

00:00:17.496 --> 00:00:19.786 align:middle
Utilicemos MakerBundle para adelantarnos.

00:00:20.286 --> 00:00:25.536 align:middle
Busca tu terminal y ejecuta: symfony
console make:controller Llámalo...

00:00:25.716 --> 00:00:26.476 align:middle
espera...

00:00:26.896 --> 00:00:28.066 align:middle
PartController.

00:00:28.606 --> 00:00:29.266 align:middle
¡Brillante!

00:00:29.786 --> 00:00:32.186 align:middle
Para mantener las cosas
centradas, di no a las pruebas.

00:00:32.756 --> 00:00:34.936 align:middle
¡Listo! Una clase y una plantilla.

00:00:35.296 --> 00:00:36.276 align:middle
Hasta aquí, todo bien.

00:00:36.866 --> 00:00:41.766 align:middle
Echa un vistazo al nuevo PartController: No
hay mucho que ver: renderiza una plantilla.

00:00:41.926 --> 00:00:46.766 align:middle
Vaya. Cambia la URL a /parts,
y renómbrala a app_part_index:

00:00:47.616 --> 00:00:49.146 align:middle
Copia el nombre de la ruta para
que podamos enlazar con ella...

00:00:49.396 --> 00:00:51.476 align:middle
y abre base.html.twig.

00:00:52.156 --> 00:00:54.436 align:middle
¿Recuerdas el enlace "Acerca de"
que está ahí sin hacer nada?

00:00:54.856 --> 00:00:57.136 align:middle
Cámbialo y conviértelo en un enlace "Piezas".

00:00:57.616 --> 00:01:02.496 align:middle
Establece href en {{ path('app_part_index')
}}: Dirígete a la página de inicio,

00:01:03.526 --> 00:01:06.006 align:middle
haz clic en nuestro recién
estrenado enlace y...

00:01:06.256 --> 00:01:08.966 align:middle
bueno, no es lo más bonito, ¡pero funciona!

00:01:09.526 --> 00:01:11.756 align:middle
Antes de celebrarlo,
deberíamos cambiar el título

00:01:11.756 --> 00:01:14.536 align:middle
de la poco inspiradora Hello PartController.

00:01:15.166 --> 00:01:20.236 align:middle
Abre templates/part/index.html.twig Ya
estamos sobreescribiendo el bloque title

00:01:20.596 --> 00:01:25.316 align:middle
, así que hagámoslo algo emocionante como Parts: Para
hacer un bucle sobre las piezas, en PartController,

00:01:25.356 --> 00:01:26.896 align:middle
necesitamos consultar todas las piezas.

00:01:28.056 --> 00:01:31.396 align:middle
Añade un argumento StarshipPartRepository
para conectarlo automáticamente.

00:01:32.026 --> 00:01:35.046 align:middle
Llámalo como quieras, como $leeroyJenkins o...

00:01:35.046 --> 00:01:36.196 align:middle
$repository.

00:01:36.856 --> 00:01:40.746 align:middle
Para obtener todas las piezas, es muy
sencillo: $parts = repository->findAll():

00:01:40.746 --> 00:01:44.926 align:middle
Ahora que tenemos esta variable parts en nuestra
plantilla, podemos hacer un bucle sobre ella:

00:01:44.926 --> 00:01:49.386 align:middle
Para animar las cosas, pegaré esta plantilla: Es
sólo un montón de cosas para que quede bonito.

00:01:49.946 --> 00:01:52.136 align:middle
Puedes obtener este código del
bloque de código de esta página.

00:01:52.916 --> 00:01:54.496 align:middle
Actualiza, y...

00:01:54.616 --> 00:01:56.066 align:middle
¡mucho mejor!

00:01:56.906 --> 00:01:59.736 align:middle
Una cosa interesante que estoy
utilizando aquí es la función cycle():

00:02:00.406 --> 00:02:03.386 align:middle
Quería dar a cada engranaje un color aleatorio
para que tuviera un aspecto más atractivo.

00:02:04.416 --> 00:02:08.796 align:middle
La función cycle() nos permite pasar un montón
de cadenas, y luego loop.index 0 hace un ciclo

00:02:08.796 --> 00:02:12.396 align:middle
a través de ellas. Es un pequeño toque, pero
añade ese toque que tanto gusta a los ferengis.

00:02:13.096 --> 00:02:18.086 align:middle
Por último, sustituye assigned to SHIP
NAME por {{ part.ship }} - esta vez,

00:02:18.086 --> 00:02:23.166 align:middle
no estoy utilizando ship.part, sino el
otro lado de la relación, part.ship.name.

00:02:24.066 --> 00:02:28.376 align:middle
Uy, culpa mía, debería
ser part.starship.name: Y...

00:02:28.496 --> 00:02:31.366 align:middle
¡ya está! A continuación,
hablaremos de las uniones.

00:02:31.596 --> 00:02:33.576 align:middle
¡Únete! Lo siento, no pude resistirme.
